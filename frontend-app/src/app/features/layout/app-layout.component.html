<mat-sidenav-container class="h-screen w-full" [class.citynet-dark]="themeService.isDarkMode()" autosize>

    <!-- Side Navigation -->
    <mat-sidenav #sidenav mode="side" opened
        class="w-64 border-r border-gray-200 dark:border-zinc-800 bg-[var(--sys-surface-container)]">
        <div class="h-16 flex items-center px-6 border-b border-gray-200 dark:border-zinc-800">
            <div class="h-8 w-8 bg-gradient-to-br from-emerald-400 to-cyan-500 rounded-lg shadow-sm mr-3"></div>
            <h1 class="text-xl font-bold tracking-wide m-0 text-[var(--sys-on-surface)]">CityNet<span
                    class="text-emerald-500 dark:text-emerald-400 font-light">IoT</span></h1>
        </div>

        <mat-nav-list class="pt-4">
            @for (item of menuItems; track item.label) {
            <a mat-list-item [routerLink]="item.route"
                routerLinkActive="bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 border-r-4 border-emerald-500 font-medium">
                <mat-icon matListItemIcon class="mr-3">{{ item.icon }}</mat-icon>
                <span matListItemTitle>{{ item.label }}</span>
            </a>
            }
        </mat-nav-list>
    </mat-sidenav>

    <!-- Main Content Area -->
    <mat-sidenav-content class="flex flex-col h-full overflow-hidden bg-[var(--sys-surface)]">

        <!-- Top Toolbar -->
        <mat-toolbar
            class="h-16 border-b border-gray-200 dark:border-zinc-800 bg-[var(--sys-surface)] text-[var(--sys-on-surface)] flex justify-between shadow-sm z-10">
            <button mat-icon-button (click)="sidenav.toggle()" aria-label="Toggle sidenav">
                <mat-icon>menu</mat-icon>
            </button>

            <div class="flex items-center space-x-2">

                <!-- Theme Toggle -->
                <button mat-icon-button (click)="toggleTheme()" matTooltip="Toggle theme">
                    <mat-icon>{{ themeService.isDarkMode() ? 'light_mode' : 'dark_mode' }}</mat-icon>
                </button>

                <!-- Notifications -->
                <button mat-icon-button aria-label="Notifications" class="mr-2 relative">
                    <mat-icon>notifications</mat-icon>
                    <span
                        class="absolute top-[10px] right-[10px] w-2.5 h-2.5 bg-red-500 rounded-full border-2 border-[var(--sys-surface)]"></span>
                </button>

                <!-- User Menu -->
                <button mat-icon-button [matMenuTriggerFor]="userMenu" aria-label="User account">
                    <div
                        class="h-8 w-8 rounded-full bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 flex items-center justify-center font-semibold text-sm border border-emerald-200 dark:border-emerald-800">
                        A
                    </div>
                </button>
                <mat-menu #userMenu="matMenu" class="mt-2">
                    <button mat-menu-item>
                        <mat-icon>person</mat-icon>
                        <span>Profile</span>
                    </button>
                    <button mat-menu-item (click)="logout()">
                        <mat-icon>logout</mat-icon>
                        <span>Sign out</span>
                    </button>
                </mat-menu>
            </div>
        </mat-toolbar>

        <!-- Page Content Router -->
        <main class="flex-1 overflow-auto p-6 lg:p-8 relative">
            <router-outlet></router-outlet>
        </main>

    </mat-sidenav-content>
</mat-sidenav-container>